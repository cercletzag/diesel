#!/bin/sh
set -e

BACKENDS="sqlite postgres mysql"

check() {
    cargo rustc --quiet --features "lint $BACKENDS $1" -- -Zno-trans
}

(cd diesel_derives &&
    check &&
    echo "✔ derives crate looks good!")

(cd diesel &&
    check "unstable extras" &&
    echo "✔ diesel core crate looks good!")

(cd diesel_migrations &&
     check &&
     echo "✔ migrations crate looks good!")

(cd diesel_cli &&
    check &&
    echo "✔ cli crate looks good!")
